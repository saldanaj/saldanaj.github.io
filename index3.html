<!DOCTYPE html>
<!--
Student: Joaquin Saldana 
Assignment: How to guide - BreweryDB
Description: this page will detail for the reader what's required of them to run a local, server side, GET request to the BreweryDB API, and how to view the information   
-->

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Brewery DB API How To Guide</title>
    <meta name="Guide on how to access the BreweryDB API">
    <meta author="Joaquin Saldana">

    <!-- IN CASE I WANT TO ADD AN ICON TO THE PAGE --> 
    <link rel="icon" href="http://www.brewerydb.com/img/logo_small.png">
    


    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="blogOverride.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="blog.css" rel="stylesheet">

  </head>
  
  <body>

  	  <div class="blog-masthead">
	      <div class="container">
	        <nav class="blog-nav">
	          <a class="blog-nav-item" href="index.html">BreweryDB API Info</a>
	          <a class="blog-nav-item" href="index2.html">Get Your API Key</a>
	          <a class="blog-nav-item active" href="index3.html">Setting Up Your Own Server</a>
	          <a class="blog-nav-item" href="index4.html">How To Put It To Use</a>
	          <a class="blog-nav-item" href="index5.html">Exit Notes</a>
	        </nav>
	      </div>
    </div>

    <div class="container">



   		<div class="blog-header">
        <h1 class="blog-title">Setting Up Your Own Local Server</h1>
        	<p class="lead blog-description">You now have your API key, but before we call to the BreweryDB API, we need to setup a local server.  This is required due to various browser and server security features which will be touched on very litely.</p>
      </div>

      	<div class="row">

      		<div class="col-sm-8 blog-main">


      		<div class="blog-post">
      			<h2 class="blog-post-title">Setting Up Your Own Local Server</h2>
      				<!-- THIS IS WHERE YOU INSERT THE BODY OF THE PAGE AND WHAT YOU WANT TO DISCUSS -->
              <p>Even with an API Key, the BreweryDB API will not allow a simple AJAX call due to a HTTP access controls and the requirement of an <i><strong>ACCESS-CONTROL-ALLOW-ORIGIN</strong></i> HTTP response header.  For this reason, we will need to setup a local server on your computer in order to make the API call.  
              </p>

              <p>If you interested in learning more about the HTTP access controls and the CORS, you can visit the Mozilla Developer Networks documents regarding the subject by <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS" title="MDN HTTP access control (CORS)">clicking here</a></p>

              <p>I know, this sounds complicated, but with some guidance and code samples, you will be well on your way to accessing the API data.
              </p>	
 				 </div><!-- /.blog-post -->

                  <div class="blog-post">
            <h2 class="blog-post-title">Create a simple HTML file</h2>
              <!-- THIS IS WHERE YOU INSERT THE BODY OF THE PAGE AND WHAT YOU WANT TO DISCUSS -->
              <p>You will need to create a simple HTML file, save it to a directory of your choose.  You will need this in order to view the JSON parsed text returned by the API.  Below is a example of a simple HTML template you can copy.  
              </p>

              <P></P>
              <img id="HTMLtemplate" src="HTMLtemplate.jpg">
              <P></P>
         </div><!-- /.blog-post -->

         <div class="blog-post">
            <h2 class="blog-post-title">Installing Node.js and ExpressJS</h2>
              <!-- THIS IS WHERE YOU INSERT THE BODY OF THE PAGE AND WHAT YOU WANT TO DISCUSS -->
              <p>Now it's time to install Node.js and ExpressJS.  You will need this to make API calls.  To learn how to install these tools you can refer to the installation pages of both sites.  You must install Node.js first before installing ExpressJS.  
              </p>

              <p>For guidance on how to install these tools you can refer to the links on the right side of this page or you can access the installation documentation at the following links:</p>

              <ol>
                  <li><a href="https://nodejs.org/en/download/" title="Node.js Download">Node.js Download Site</a></li>
                  <li><a href="http://expressjs.com/en/starter/installing.html" title="ExpressJs Installation">ExpressJS Download Site</a></li>
              </ol>

              <p>Once you have these installed and your <i>package.json</i> file is available, you will need to install the <i>request</i> package dependency which is an object of the Express middleware.  For guidance on how to do this and what it does you can visit the NPMJS page by <a href="https://www.npmjs.com/package/request" title="NPM Package Request">clicking here</a>.  This tool is necessary to do HTTP requests to the BreweryDB API</p>

         </div><!-- /.blog-post -->

         <div class="blog-post">
            <h2 class="blog-post-title">Server Code</h2>
              <!-- THIS IS WHERE YOU INSERT THE BODY OF THE PAGE AND WHAT YOU WANT TO DISCUSS -->
              <p>Now that your setup, you need to select a directory where to save your server.js file.  The directory will need to have the <i>package.json</i> copied to it and the node modules installed.  
              </p>
              <p>Once this is done, you can create a Javascript file, preferably titled <i>server.js</i>.  In this file we will draft our code to access the BreweryDB API.  The code will act as our middleware between us and the API servers.  This is considered good practice so we can talk directly to the server, and in addition mask our API key which is imperative.  
              </p>
              <p>We begin by initializing our <code>express</code> and <code>request</code> objects.  This is visisble in the first two lines of the code displayed below.  
              </p>
              <p></p>
              <img id="serverCode1" src="serverCode1.jpg">
              <p>Furthermore, your going to want to set a variable to hold you API key, then call your express object to a designated variable, in my example i choose <code>var app</code> and you need to set your port by using the 
              <code>app.set</code> function.
              </p>
              <h3>API URL query requirements</h3>
              <p>Now, before we go any further I need to explain the URL requirements for querying the BreweryDB API.  As stated in the API documentation (<a href="http://www.brewerydb.com/developers/docs" title="Brewery API Documenation">Found Here</a>) the API expects the following URl syntax:   
              </p>
              <p><code>http://api.brewerydb.com/v2/</code> + <code>{Insert EndPoint Argument}</code> + <code>?key={YOUR API KEY}</code> + <code>&amp;{Enter Desired Request Parameters, Ex: &amp;srmId=10}</code></p>

              <p>As explained in the API documentation, each endpoint as certain requirements.  For example, if you elect to use the <code>GET:/beers</code> endpoint, you will need to including of the following request parameters, or as they call them attributes, in the URL:</p>

              <ul>
                  <li>name</li>
                  <li>abv</li>
                  <li>ibu</li>
                  <li>srmId</li>
                  <li>availabilityId</li>
                  <li>styleId</li>
              </ul>

              <p>Below is an example of a URl call to the API: </p>
              <p><code>http://api.brewerydb.com/v2/beers?key={YOUR KEY}&amp;srmId=10</code></p>
              <p>This will return all of the beers with a srmId assigned with the value of 10.</p>

              <h3>Finalizing Server Code</h3>
              <p>Now for the final piece of the server code, you will need to again initialize a <code>app.get</code> function to access the data. See the image below.</p>
              <p></p>
              <img id="finalServerCode" src="finalServerCode.jpg">
              <p></p>
              <p>In the <code>app.get</code> code pictured above, when we enter <code>http://localhost:8000/getBeers</code> into our browsers URL bar, we will be making a <code>GET</code> call to the API's <code>/Beers</code> endpoint and use the following attributes <code>&amp;availableId=2&amp;year=2012</code>.  This will return a list (or array as some may call it) of 50 beers whose available id equal 2 and year data equals 2012.</p>
              <p>The remaining code is standard error handling code which can be copied if desired.</p>
              <h3>Output</h3>
              <p>We initialize the .js script by enter <code>node server.js 8000</code> in our Windows Command Prompt or MacOSX Command Line and voila, we have output.  It's not pretty, but we know see how we can use this data.  Below is a sample output which you can expect.</p>
              <img  id="apiResults" src="apiResults.jpg">
              <p></p>
              <p>Now we can discuss what we can do with this data ... on to the next page!</p>

         </div><!-- /.blog-post -->

 				 <nav>
            <ul class="pager">
                <li><a href="index2.html">Previous</a></li>
		            <li><a href="index4.html">Next</a></li>
            </ul>
         </nav>

			</div><!-- /.blog-main -->

			<div class="col-sm-3 col-sm-offset-1 blog-sidebar">
				<img src="http://www.brewerydb.com/img/logo_small.png">
		        <div class="sidebar-module">
		        	<h4>Important Links</h4>
		            	<ol class="list-unstyled">
		              		<li><a href="http://www.brewerydb.com/developers">BreweryDB API</a></li>
		              		<li><a href="https://nodejs.org/en/">Node.js</a></li>
		              		<li><a href="http://expressjs.com/">ExpressJS</a></li>
		              		<li><a href="https://jsfiddle.net/">JSFiddle</a></li>
		            	</ol>
		        </div>
        	</div><!-- /.blog-sidebar -->

        </div><!-- /.row -->

    </div><!-- /.container -->


	 <footer class="blog-footer">
      <p>Built by Joaquin Saldana using <a href="http://getbootstrap.com">Bootstrap</a>.</p>
      <p>
        <a href="#">Back to top</a>
      </p>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>